import '../models/notification_model.dart';

class NotificationRepository {
  final List<NotificationModel> _notifications = [
    NotificationModel(
      id: '0',
      title: 'Đăng ký tài khoản thành công',
      message:
          'Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!',
      timestamp: DateTime(2025, 3, 19, 19, 0),
      isRead: false,
      isActive: true,
    ),
    NotificationModel(
      id: '1',
      title: 'Đăng ký tài khoản thành công',
      message:
          'Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!',
      timestamp: DateTime(2025, 3, 19, 19, 0),
      isRead: false,
      isActive: true,
    ),
    NotificationModel(
      id: '2',
      title: 'Đăng ký tài khoản thành công',
      message:
          'Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!',
      timestamp: DateTime(2025, 3, 19, 19, 0),
      isRead: false,
      isActive: true,
    ),
    NotificationModel(
      id: '3',
      title: 'Đăng ký tài khoản thành công',
      message:
          'Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!',
      timestamp: DateTime(2025, 3, 19, 19, 0),
      isRead: false,
      isActive: true,
    ),
    NotificationModel(
      id: '4',
      title: 'Đăng ký tài khoản thành công',
      message:
          'Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!',
      timestamp: DateTime(2025, 3, 19, 19, 0),
      isRead: true,
      isActive: true,
    ),
    NotificationModel(
      id: '5',
      title: 'Đăng ký tài khoản thành công',
      message:
          'Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!',
      timestamp: DateTime(2025, 3, 19, 19, 0),
      isRead: true,
      isActive: true,
    ),
    NotificationModel(
      id: '6',
      title: 'Đăng ký tài khoản thành công',
      message:
          'Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!',
      timestamp: DateTime(2025, 3, 19, 19, 0),
      isRead: true,
      isActive: true,
    ),
    NotificationModel(
      id: '7',
      title: 'Đăng ký tài khoản thành công',
      message:
          'Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé! Chúc mừng bạn đã đăng ký tài khoản thành công tại Homie Open. Cùng chúng tôi trải nghiệm với những bộ phim hấp dẫn nhé!',
      timestamp: DateTime(2025, 3, 19, 19, 0),
      isRead: false,
      isActive: true,
    ),
  ];

  DateTime _lastSyncTime = DateTime(2000);

  Future<NotificationModel?> getNotificationById(String id) async {
    await Future.delayed(const Duration(milliseconds: 300));
    try {
      print('Repository: Đang tìm thông báo ID: $id');
      print(
          'Repository: Danh sách ID hiện có: ${_notifications.map((e) => e.id).toList()}');

      if (id.isEmpty) {
        print('Repository: ID trống');
        return null;
      }

      final matchingNotifications =
          _notifications.where((n) => n.id == id).toList();
      print(
          'Repository: Số lượng thông báo phù hợp: ${matchingNotifications.length}');

      if (matchingNotifications.isEmpty) {
        return null;
      }

      return matchingNotifications.first;
    } catch (e) {
      print('Repository: Lỗi khi tìm thông báo: $e');
      return null;
    }
  }

  Future<List<NotificationModel>> getNotifications() async {
    await Future.delayed(const Duration(milliseconds: 500));
    return _notifications;
  }

  Future<List<NotificationModel>> syncNotifications() async {
    await Future.delayed(const Duration(milliseconds: 800));

    _lastSyncTime = DateTime.now();

    return _notifications;
  }

  Future<void> markAsRead(String id) async {
    await Future.delayed(const Duration(milliseconds: 300));
    final index =
        _notifications.indexWhere((notification) => notification.id == id);
    if (index != -1) {
      _notifications[index] = _notifications[index].copyWith(isRead: true);
    }
  }

  Future<void> markAllAsRead() async {
    await Future.delayed(const Duration(milliseconds: 300));
    for (int i = 0; i < _notifications.length; i++) {
      _notifications[i] = _notifications[i].copyWith(isRead: true);
    }
  }

  Future<bool> deleteNotification(String id) async {
    await Future.delayed(const Duration(milliseconds: 300));
    final initialLength = _notifications.length;
    _notifications.removeWhere((notification) => notification.id == id);
    return initialLength != _notifications.length;
  }

  Future<bool> isNotificationRead(String id) async {
    final notification = _notifications.firstWhere(
      (n) => n.id == id,
      orElse: () => NotificationModel(
        id: '',
        title: '',
        message: '',
        timestamp: DateTime.now(),
      ),
    );
    return notification.isRead;
  }

  DateTime getLastSyncTime() {
    return _lastSyncTime;
  }
}
